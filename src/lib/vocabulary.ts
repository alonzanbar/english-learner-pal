export interface Word {
  english: string;
  hebrew: string;
  sublist: number;
}

const CSV_DATA = `analyze,לנתח
approach,גישה
area,אזור
assess,להעריך
assume,להניח
authority,סמכות
available,זמין
benefit,תועלת
concept,מושג
consistent,עקבי
constitute,להוות
context,הקשר
contract,חוזה
create,ליצור
data,נתונים
define,להגדיר
derive,לגזור
distribute,להפיץ
economy,כלכלה
environment,סביבה
establish,לבסס
estimate,להעריך
evidence,ראיות
export,לייצא
factor,גורם
finance,מימון
formula,נוסחה
function,תפקוד
identify,לזהות
income,הכנסה
indicate,להצביע
individual,פרט
interpret,לפרש
involve,לערב
issue,סוגיה
labor,עבודה
legal,חוקי
legislate,לחוקק
major,עיקרי
method,שיטה
occur,להתרחש
percent,אחוז
period,תקופה
policy,מדיניות
principle,עיקרון
proceed,להמשיך
process,תהליך
require,לדרוש
research,מחקר
respond,להגיב
role,תפקיד
section,חלק
sector,מגזר
significant,משמעותי
similar,דומה
source,מקור
specific,ספציפי
structure,מבנה
theory,תיאוריה
vary,לשנות
achieve,להשיג
acquire,לרכוש
administrate,לנהל
affect,להשפיע
appropriate,מתאים
aspect,היבט
assist,לסייע
category,קטגוריה
chapter,פרק
commission,ועדה
community,קהילה
complex,מורכב
compute,לחשב
conclude,לסכם
conduct,להתנהל
consequent,תוצאתי
construct,לבנות
consume,לצרוך
credit,אשראי
culture,תרבות
design,עיצוב
distinct,מובחן
element,אלמנט
equate,להשוות
evaluate,להעריך
feature,תכונה
final,סופי
focus,מיקוד
impact,השפעה
injure,לפגוע
institute,מכון
invest,להשקיע
item,פריט
journal,כתב עת
maintain,לתחזק
normal,רגיל
obtain,להשיג
participate,להשתתף
perceive,לתפוס
positive,חיובי
potential,פוטנציאל
previous,קודם
primary,ראשוני
purchase,לרכוש
range,טווח
region,אזור
regulate,לווסת
relevant,רלוונטי
resident,תושב
resource,משאב
restrict,להגביל
secure,לאבטח
seek,לחפש
select,לבחור
site,אתר
strategy,אסטרטגיה
survey,סקר
text,טקסט
tradition,מסורת
transfer,להעביר
alternative,חלופה
circumstance,נסיבות
comment,הערה
compensate,לפצות
component,רכיב
consent,הסכמה
considerable,ניכר
constant,קבוע
constrain,לאלץ
contribute,לתרום
convene,לכנס
coordinate,לתאם
core,ליבה
corporate,תאגידי
correspond,להתכתב
criteria,קריטריונים
deduce,להסיק
demonstrate,להדגים
document,מסמך
domestic,ביתי
emphasis,דגש
ensure,להבטיח
exclude,להוציא
framework,מסגרת
fund,קרן
illustrate,להמחיש
immigrate,להגר
imply,לרמוז
initial,ראשוני
instance,מקרה
interact,לפעול
justify,להצדיק
layer,שכבה
link,קישור
locate,לאתר
maximum,מקסימום
minor,מינורי
negate,לשלול
outcome,תוצאה
partner,שותף
philosophy,פילוסופיה
physical,פיזי
proportion,פרופורציה
publish,לפרסם
react,להגיב
register,להירשם
rely,לסמוך
remove,להסיר
scheme,תוכנית
sequence,רצף
sex,מין
shift,תזוזה
specify,לפרט
sufficient,מספיק
task,משימה
technical,טכני
technique,טכניקה
technology,טכנולוגיה
valid,תקף
volume,נפח
access,גישה
adequate,מספק
annual,שנתי
apparent,גלוי
approximate,משוער
attitude,גישה
attribute,לייחס
civil,אזרחי
code,קוד
commit,להתחייב
communicate,לתקשר
concentrate,להתרכז
confer,להעניק
contrast,ניגוד
cycle,מחזור
debate,דיון
despite,למרות
dimension,ממד
dominate,לשלוט
emerge,להופיע
error,טעות
ethnic,אתני
goal,מטרה
grant,מענק
hence,לכן
hypothesis,השערה
implement,ליישם
implicate,להסתבך
impose,לכפות
integrate,לשלב
internal,פנימי
investigate,לחקור
job,עבודה
label,תווית
mechanism,מנגנון
obvious,ברור
occupy,לכבוש
option,אפשרות
output,תפוקה
overall,כולל
parallel,מקביל
parameter,פרמטר
phase,שלב
predict,לחזות
principal,עיקרי
prior,קודם
professional,מקצועי
project,פרויקט
promote,לקדם
regime,משטר
resolve,לפתור
retain,לשמור
series,סדרה
statistic,סטטיסטיקה
status,מעמד
stress,לחץ
subsequent,עוקב
sum,סכום
summary,סיכום
undertake,לבצע
academy,אקדמיה
adjust,להתאים
alter,לשנות
amend,לתקן
aware,מודע
capacity,קיבולת
challenge,אתגר
clause,סעיף
compound,תרכובת
conflict,סכסוך
consult,להתייעץ
contact,קשר
decline,ירידה
discrete,נפרד
draft,טיוטה
enable,לאפשר
energy,אנרגיה
enforce,לאכוף
entity,ישות
equivalent,שווה ערך
evolve,להתפתח
expand,להרחיב
expose,לחשוף
external,חיצוני
facilitate,להקל
fundamental,יסודי
generate,לייצר
generation,דור
image,תמונה
liberal,ליברלי
license,רישיון
logic,הגיון
margin,שוליים
medical,רפואי
mental,נפשי
modify,לשנות
monitor,לפקח
network,רשת
notion,מושג
objective,מטרה
orient,לכוון
perspective,פרספקטיבה
precise,מדויק
prime,ראשי
psychology,פסיכולוגיה
pursue,לרדוף
ratio,יחס
reject,לדחות
revenue,הכנסות
stable,יציב
style,סגנון
substitute,תחליף
sustain,לקיים
symbol,סמל
target,יעד
transit,מעבר
trend,מגמה
version,גרסה
welfare,רווחה
whereas,בעוד ש
abstract,מופשט
accurate,מדויק
acknowledge,להכיר
aggregate,מצטבר
allocate,להקצות
assign,להקצות
attach,לצרף
author,מחבר
bond,קשר
brief,קצר
capable,מסוגל
cite,לצטט
cooperate,לשתף פעולה
discriminate,להפלות
display,להציג
diverse,מגוון
domain,תחום
edit,לערוך
enhance,לשפר
estate,נכס
exceed,לעלות
expert,מומחה
explicit,מפורש
federal,פדרלי
fee,עמלה
flexible,גמיש
furthermore,יתר על כן
gender,מגדר
ignorant,בור
incentive,תמריץ
incidence,שכיחות
incorporate,לשלב
index,מדד
inhibit,לעכב
initiate,ליזום
input,קלט
instruction,הוראה
intelligent,חכם
interval,מרווח
lecture,הרצאה
migrate,להגר
minimum,מינימום
ministry,משרד
motive,מניע
neutral,ניטרלי
nevertheless,בכל זאת
overseas,מעבר לים
precede,להקדים
presume,להניח
rational,רציונלי
recover,להתאושש
reveal,לחשוף
scope,היקף
subsidy,סובסידיה
tape,קלטת
trace,עקבות
transform,לשנות
transport,תחבורה
underlie,לבסס
utilize,להשתמש
adapt,להסתגל
adult,מבוגר
advocate,לתמוך
aid,עזרה
channel,ערוץ
chemical,כימי
classic,קלאסי
comprehensive,מקיף
comprise,לכלול
confirm,לאשר
contrary,הפוך
convert,להמיר
couple,זוג
decade,עשור
definite,ודאי
deny,להכחיש
differentiate,להבדיל
dispose,לסלק
dynamic,דינמי
eliminate,לבטל
empirical,אמפירי
equipment,ציוד
extract,לחלץ
file,קובץ
finite,סופי
foundation,יסוד
globe,גלובוס
grade,ציון
guarantee,ערבות
hierarchy,היררכיה
identical,זהה
ideology,אידיאולוגיה
infer,להסיק
innovate,לחדש
insert,להכניס
intervene,להתערב
isolate,לבודד
media,מדיה
mode,מצב
paradigm,פרדיגמה
phenomenon,תופעה
priority,עדיפות
prohibit,לאסור
publication,פרסום
quote,ציטוט
release,לשחרר
reverse,הפוך
simulate,לדמות
sole,יחיד
somewhat,במידה מסוימת
submit,להגיש
successor,ממשיך
survive,לשרוד
thesis,תזה
topic,נושא
transmit,לשדר
ultimate,סופי
unique,ייחודי
visible,נראה
voluntary,התנדבותי`;

let _words: Word[] | null = null;

export function getAllWords(): Word[] {
  if (_words) return _words;
  
  const lines = CSV_DATA.split('\n');
  const wordsPerSublist = 60;
  
  _words = lines.map((line, index) => {
    const [english, hebrew] = line.split(',');
    return {
      english: english.trim(),
      hebrew: hebrew.trim(),
      sublist: Math.floor(index / wordsPerSublist) + 1,
    };
  });
  
  return _words;
}

export function getWordsBySublist(sublist: number): Word[] {
  return getAllWords().filter(w => w.sublist === sublist);
}

export function getSublists(): number[] {
  const all = getAllWords();
  return [...new Set(all.map(w => w.sublist))].sort((a, b) => a - b);
}

export function getRandomOptions(correctWord: Word, count: number = 4): Word[] {
  const all = getAllWords().filter(w => w.english !== correctWord.english);
  const shuffled = [...all].sort(() => Math.random() - 0.5);
  const options = shuffled.slice(0, count - 1);
  const insertIndex = Math.floor(Math.random() * count);
  options.splice(insertIndex, 0, correctWord);
  return options;
}

export function shuffleArray<T>(arr: T[]): T[] {
  const shuffled = [...arr];
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }
  return shuffled;
}
